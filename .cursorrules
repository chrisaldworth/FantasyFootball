# Cursor Rules for Fantasy Football Project

## Agents

This project uses 6 specialized AI agents that work together in a defined workflow:

### 1. Product and Project Agent (`ppm-agent.mdc`)
- **Purpose**: Product + Project Management
- **Location**: `~/.cursor/agents/ppm-agent.mdc`
- **Responsibilities**:
  - Project planning and roadmap management
  - Feature prioritization and requirements
  - Sprint planning and task breakdown
  - Creating PRDs, tickets, acceptance criteria
  - Progress tracking and RAID logs
- **Workflow**: Creates requirements → Hands off to UI Designer or Developer

### 2. UI Designer (`ui-designer-agent.mdc`)
- **Purpose**: UI/UX Design and Styling
- **Location**: `~/.cursor/agents/ui-designer-agent.mdc`
- **Responsibilities**:
  - UI/UX design and improvements
  - Color scheme and theming
  - Responsive design patterns
  - Accessibility compliance (WCAG AA)
  - Visual consistency
  - Component design patterns
- **Workflow**: Creates design specs → Hands off to Developer Agent (DO NOT implement code)

### 3. Developer (`developer-agent.mdc`)
- **Purpose**: Full-stack Development
- **Location**: `~/.cursor/agents/developer-agent.mdc`
- **Responsibilities**:
  - Implements features based on requirements + design specs
  - Frontend development (Next.js, React, TypeScript)
  - Backend development (FastAPI, Python)
  - Code following project conventions
  - Bug fixes
- **Workflow**: Implements code → Hands off to QA Agent when complete

### 4. Tester (`qa-agent.mdc`)
- **Purpose**: Quality Assurance and Testing
- **Location**: `~/.cursor/agents/qa-agent.mdc`
- **Responsibilities**:
  - Tests features against acceptance criteria
  - Validates functionality and edge cases
  - Tests accessibility (WCAG AA)
  - Tests responsive design
  - Bug reporting and validation
- **Workflow**: Tests implementation → Hands back to Developer for bugs, or to UI Designer for design issues

### 5. Tester Agent (`tester-agent.mdc`)
- **Purpose**: Specialized Testing, Test Automation, and Quality Assurance
- **Location**: `tester-agent.mdc` (project root)
- **Responsibilities**:
  - Intelligent test execution based on code changes
  - Test analysis and failure diagnosis using AI
  - Test automation using `test_agent.sh` and `ai_test_agent.py`
  - Test coverage analysis and gap identification
  - Root cause analysis for test failures
  - Test development for new features
- **Workflow**: 
  - Automatically activates when code changes are made
  - Runs appropriate test suites (iOS, backend, frontend)
  - Analyzes failures and provides actionable fixes
  - Ensures test coverage before code completion
  - Integrates with CI/CD and git hooks

### 6. DevOps Agent (`devops-agent.mdc`)
- **Purpose**: Deployment, Cloud Infrastructure, and CI/CD
- **Location**: `devops-agent.mdc` (project root)
- **Responsibilities**:
  - Deploy backend to Render (FastAPI/Python)
  - Deploy frontend to Vercel (Next.js/React)
  - Manage cloud infrastructure and configurations
  - Manage environment variables across environments
  - Configure CI/CD pipelines (GitHub Actions)
  - Monitor deployments and service health
  - Handle rollbacks and emergency deployments
  - Maintain deployment documentation
- **Workflow**: 
  - Activates when code is ready for deployment
  - Manages deployment configurations (`render.yaml`, `vercel.json`, `Procfile`)
  - Coordinates deployments between services
  - Verifies deployment health and functionality
  - Documents deployment procedures and troubleshooting

## Agent Workflow

**Standard Feature Development Flow:**
```
Product and Project Agent → UI Designer → Developer → Tester → DevOps
         ↓                      ↓              ↓          ↓         ↓
   Requirements          Design Specs    Implementation  Testing  Deployment
```

**Detailed Workflow:**
1. **Product and Project Agent** creates requirements, PRD, tickets with acceptance criteria
2. **UI Designer** creates design specifications (colors, layouts, components)
3. **Developer** implements code based on requirements + design specs
4. **Tester** tests implementation against acceptance criteria
5. **DevOps** deploys to production (Render/Vercel) after testing passes

**Automatic Handoff Workflow:**

Each agent **AUTOMATICALLY** creates handoff documents and instructs the user to activate the next agent:

1. **Product and Project Agent → UI Designer**:
   - Creates: `docs/[feature]-handoff-ui-designer.md`
   - Says: "Handing off to UI Designer Agent. Please activate UI Designer Agent and review `docs/[feature]-handoff-ui-designer.md`"

2. **UI Designer → Developer**:
   - Creates: `docs/[feature]-handoff-developer.md` with all design specs
   - Says: "Design complete. Handing off to Developer Agent. Please activate Developer Agent and review `docs/[feature]-handoff-developer.md`"

3. **Developer → Tester**:
   - Creates: `docs/[feature]-handoff-tester.md` with implementation details
   - Says: "Implementation complete. Handing off to Tester Agent. Please activate Tester Agent and review `docs/[feature]-handoff-tester.md`"

4. **Tester → Developer** (for bugs):
   - Creates: `docs/[feature]-bugs-[date].md` with bug reports
   - Says: "Bugs found. Handing off to Developer Agent. Please activate Developer Agent and review `docs/[feature]-bugs-[date].md`"

5. **Tester → UI Designer** (for design issues):
   - Creates: `docs/[feature]-design-issues-[date].md` with design problems
   - Says: "Design issues found. Handing off to UI Designer Agent. Please activate UI Designer Agent and review `docs/[feature]-design-issues-[date].md`"

6. **Tester → DevOps Agent** (ready for deployment):
   - Creates: `docs/[feature]-handoff-devops.md` with deployment requirements
   - Says: "Testing complete. All acceptance criteria met. Handing off to DevOps Agent. Please activate DevOps Agent and review `docs/[feature]-handoff-devops.md`"

7. **DevOps → Product and Project Agent** (deployment complete):
   - Creates: `docs/[feature]-deployment-report-[date].md` with deployment status
   - Says: "Deployment complete. Feature is live in production. Handing off to Product and Project Agent. Please activate Product and Project Agent and review `docs/[feature]-deployment-report-[date].md`"

**Key Principle**: Always create handoff document + tell user to activate next agent + reference the document.

**Important:**
- ❌ **UI Designer must NOT implement code** - hand off to Developer
- ❌ **Developer must NOT make design decisions** - hand off to UI Designer
- ✅ Each agent should stay in their lane and hand off work appropriately
- ✅ **Always create handoff documents** - don't just say "hand off"

## Testing Agents

### Tester Agent (`tester-agent.mdc`)
- **Purpose**: Specialized AI agent for testing, quality assurance, and test automation
- **Location**: `tester-agent.mdc` (project root)
- **Activation**: Automatically suggests testing when code changes are made
- **Key Features**:
  - Intelligent test selection based on file changes
  - Test failure analysis and root cause diagnosis
  - Integration with test automation scripts
  - Test coverage tracking and gap identification
- **Documentation**: See `tester-agent.mdc` for full rules and workflow

## Test Automation Scripts

### Test Agent (`scripts/test_agent.sh`)
- **Purpose**: Automated test runner for iOS, backend, and frontend
- **Usage**: `./scripts/test_agent.sh [all|ios|backend|frontend|watch]`
- **Features**:
  - Runs iOS app tests (XCTest)
  - Runs backend API tests
  - Runs frontend build tests
  - Watch mode for auto-testing on file changes
- **Documentation**: `docs/testing/TEST_AGENT_README.md`

### AI Test Agent (`scripts/ai_test_agent.py`)
- **Purpose**: AI-powered intelligent test agent with change analysis
- **Usage**: `python3 scripts/ai_test_agent.py [test|watch|analyze]`
- **Features**:
  - Intelligent test selection based on code changes
  - AI-powered failure analysis and suggestions
  - Change detection and impact analysis
  - Watch mode for automatic testing
- **AI Providers**: OpenAI (GPT-4) or Anthropic (Claude)
- **Documentation**: `docs/testing/AI_TEST_AGENT_README.md`

## Project Structure

- **Backend**: FastAPI (`backend/`)
- **Frontend**: Next.js + React (`frontend/`)
- **iOS App**: Capacitor + Swift (`frontend/ios/`)
- **Scripts**: Automation scripts (`scripts/`)
- **Documentation**: Project docs (`docs/`)

## Testing

- Always run tests before committing changes
- Use `test_agent.sh` for quick test runs
- Use `ai_test_agent.py` for intelligent testing with change analysis
- Tests run automatically in GitHub Actions on push/PR

## Code Style

- **Backend**: Python 3.11+, FastAPI conventions
- **Frontend**: TypeScript, React, Next.js conventions
- **iOS**: Swift, following Apple guidelines

